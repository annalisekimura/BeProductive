{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { EventHandler, formatUnit, isNullOrUndefined, createElement, addClass, append, prepend, remove, extend } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * month view\n */\nvar Month = /** @class */function (_super) {\n  __extends(Month, _super);\n  function Month(parent) {\n    var _this = _super.call(this, parent) || this;\n    _this.dayNameFormat = 'wide';\n    _this.viewClass = 'e-month-view';\n    _this.isInverseTableSelect = false;\n    _this.monthEvent = null;\n    _this.monthDates = {};\n    return _this;\n  }\n  Month.prototype.addEventListener = function () {\n    this.parent.on(event.scrollUiUpdate, this.onScrollUIUpdate, this);\n    this.parent.on(event.dataReady, this.onDataReady, this);\n    this.parent.on(event.cellClick, this.onCellClick, this);\n  };\n  Month.prototype.removeEventListener = function () {\n    if (this.parent) {\n      this.parent.off(event.scrollUiUpdate, this.onScrollUIUpdate);\n      this.parent.off(event.dataReady, this.onDataReady);\n      this.parent.off(event.cellClick, this.onCellClick);\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  Month.prototype.onDataReady = function (args) {\n    this.monthEvent = new MonthEvent(this.parent);\n    this.monthEvent.renderAppointments();\n    this.parent.notify(event.eventsLoaded, {});\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  Month.prototype.onCellClick = function (event) {};\n  Month.prototype.onContentScroll = function (e) {\n    this.parent.removeNewEventElement();\n    this.parent.notify(event.virtualScroll, e);\n    this.scrollTopPanel(e.target);\n    this.scrollLeftPanel(e.target);\n    this.parent.uiStateValues.top = e.target.scrollTop;\n    this.parent.uiStateValues.left = e.target.scrollLeft;\n    this.setPersistence();\n  };\n  Month.prototype.scrollLeftPanel = function (target) {\n    var leftPanel = this.getLeftPanelElement();\n    if (leftPanel) {\n      leftPanel.scrollTop = target.scrollTop;\n    }\n  };\n  Month.prototype.getLeftPanelElement = function () {\n    return this.element.querySelector('.' + cls.WEEK_NUMBER_WRAPPER_CLASS);\n  };\n  Month.prototype.onScrollUIUpdate = function (args) {\n    var headerHeight = this.getHeaderBarHeight();\n    var header = this.getDatesHeaderElement();\n    var content = this.getContentAreaElement();\n    var height = this.parent.element.offsetHeight - headerHeight - header.offsetHeight;\n    var leftPanel = this.getLeftPanelElement();\n    if (this.parent.height !== 'auto') {\n      this.setContentHeight(content, leftPanel, height);\n    }\n    var scrollBarWidth = util.getScrollBarWidth();\n    header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n    header.style[args.cssProperties.rtlPadding] = '';\n    if (content.offsetWidth - content.clientWidth > 0) {\n      header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n      header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n    } else {\n      header.firstElementChild.style[args.cssProperties.border] = '';\n      header.style[args.cssProperties.padding] = '';\n    }\n    this.setColWidth(content);\n    if (args.scrollPosition || !args.isPreventScrollUpdate && this.parent.currentView === 'TimelineMonth') {\n      var top_1 = this.parent.currentView === 'TimelineMonth' ? this.parent.uiStateValues.top : args.scrollPosition.top;\n      if (leftPanel) {\n        leftPanel.scrollTop = top_1;\n      }\n      content.scrollTop = top_1;\n      if (this.parent.uiStateValues.isInitial) {\n        this.scrollToSelectedDate();\n        this.parent.uiStateValues.isInitial = false;\n      } else {\n        content.scrollLeft = this.parent.currentView === 'TimelineMonth' ? this.parent.uiStateValues.left : args.scrollPosition.left;\n      }\n    } else {\n      this.scrollToSelectedDate();\n    }\n    this.retainScrollPosition();\n  };\n  Month.prototype.scrollToSelectedDate = function () {\n    var headerCell = this.element.querySelector('.' + cls.HEADER_CELLS_CLASS + '[data-date=\"' + this.parent.selectedDate.getTime().toString() + '\"]');\n    var content = this.getContentAreaElement();\n    if (!isNullOrUndefined(headerCell)) {\n      content.scrollLeft = !this.parent.enableRtl ? headerCell.offsetLeft : -(this.parent.getContentTable().offsetWidth - headerCell.offsetLeft - headerCell.offsetWidth);\n    } else {\n      content.scrollLeft = 0;\n    }\n    if (content.scrollLeft === 0 && this.parent.uiStateValues.isInitial) {\n      this.parent.uiStateValues.left = 0;\n    }\n  };\n  Month.prototype.setContentHeight = function (content, leftPanelElement, height) {\n    content.style.height = 'auto';\n    if (this.parent.currentView === 'Month') {\n      content.style.height = formatUnit(height);\n    }\n    if (leftPanelElement) {\n      if (this.parent.currentView === 'MonthAgenda') {\n        height = this.parent.activeViewOptions.interval > 1 ? this.getContentAreaElement().firstElementChild.offsetHeight : this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).offsetHeight;\n      }\n      leftPanelElement.style.height = 'auto';\n      leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n    }\n  };\n  Month.prototype.generateColumnLevels = function () {\n    var colLevels = [];\n    var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      colLevels = this.parent.resourceBase.generateResourceLevels(level);\n      if (this.parent.currentView === 'MonthAgenda') {\n        colLevels = [level];\n      }\n      if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n        var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        var levels_1 = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays);\n        if (this.parent.activeViewOptions.group.byDate && this.parent.activeViewOptions.group.hideNonWorkingDays) {\n          var index = levels_1.findIndex(function (x, index) {\n            return index !== 0 && x.date.getDay() === levels_1[0].date.getDay();\n          });\n          levels_1 = index > -1 ? levels_1.slice(0, index) : levels_1;\n        }\n        colLevels = [levels_1];\n      }\n    } else {\n      colLevels.push(level);\n    }\n    this.colLevels = colLevels;\n    return colLevels;\n  };\n  Month.prototype.getDateSlots = function (renderDates, workDays) {\n    var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : workDays.length;\n    var dateSlots = [];\n    var isCurrentMonth = this.isCurrentMonth(this.parent.selectedDate);\n    for (var col = 0; col < count; col++) {\n      var classList = [cls.HEADER_CELLS_CLASS];\n      var currentDateIndex = renderDates.slice(0, count).map(function (date) {\n        return date.getDay();\n      });\n      if (isCurrentMonth && currentDateIndex.indexOf(this.parent.currentTimezoneDate.getDay()) === col) {\n        classList.push(cls.CURRENT_DAY_CLASS);\n      }\n      dateSlots.push({\n        date: renderDates[parseInt(col.toString(), 10)],\n        type: 'monthDay',\n        className: classList,\n        colSpan: 1,\n        workDays: workDays\n      });\n    }\n    return dateSlots;\n  };\n  Month.prototype.getDayNameFormat = function () {\n    if (this.parent.isAdaptive || this.parent.activeViewOptions.group.resources.length > 0) {\n      return 'abbreviated';\n    }\n    return 'wide';\n  };\n  Month.prototype.renderLayout = function (type) {\n    this.dayNameFormat = this.getDayNameFormat();\n    this.setPanel(createElement('div', {\n      className: cls.TABLE_WRAP_CLASS\n    }));\n    var clsList = [this.viewClass];\n    clsList.push(type);\n    if (this.parent.activeViewOptions.group.byDate) {\n      clsList.push('e-by-date');\n      if (this.parent.currentView !== 'Month') {\n        this.parent.activeViewOptions.group.hideNonWorkingDays = false;\n      }\n    }\n    if (this.parent.activeViewOptions.allowVirtualScrolling && !this.parent.uiStateValues.isGroupAdaptive) {\n      clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n    }\n    if (this.parent.rowAutoHeight && this.parent.eventSettings.ignoreWhitespace) {\n      clsList.push(cls.IGNORE_WHITESPACE);\n    }\n    addClass([this.element], clsList);\n    this.renderPanel(type);\n    this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n    this.element.querySelector('table').setAttribute('role', 'presentation');\n    this.colLevels = this.generateColumnLevels();\n    this.renderHeader();\n    this.renderContent();\n    var target = this.parent.currentView === 'MonthAgenda' ? this.parent.activeView.getPanel() : this.parent.element;\n    if (this.parent.uiStateValues.isGroupAdaptive && !target.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n      this.renderResourceMobileLayout();\n    }\n    this.parent.notify(event.contentReady, {});\n    if (this.parent.uiStateValues.isCustomMonth) {\n      this.parent.uiStateValues.isCustomMonth = false;\n    }\n  };\n  Month.prototype.refreshHeader = function () {\n    remove(this.element.querySelector('tbody tr'));\n    this.renderHeader();\n    this.parent.notify(event.contentReady, {});\n    var dateHeader = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n    if (dateHeader) {\n      dateHeader.scrollLeft = this.parent.uiStateValues.left;\n    }\n  };\n  Month.prototype.wireCellEvents = function (element) {\n    EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n    EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n    if (!this.parent.isAdaptive) {\n      EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n    }\n  };\n  Month.prototype.renderHeader = function () {\n    var tr = createElement('tr');\n    this.renderLeftIndent(tr);\n    var dateTd = createElement('td');\n    dateTd.appendChild(this.renderDatesHeader());\n    tr.appendChild(dateTd);\n    prepend([tr], this.element.querySelector('tbody'));\n  };\n  Month.prototype.renderLeftIndent = function (tr) {\n    if (this.parent.activeViewOptions.showWeekNumber) {\n      tr.appendChild(createElement('td', {\n        className: 'e-left-indent'\n      }));\n    }\n  };\n  Month.prototype.renderContent = function () {\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.parent.resourceBase.renderedResources = extend([], this.parent.resourceBase.lastResourceLevel, null, true);\n    }\n    var tr = createElement('tr');\n    if (this.parent.activeViewOptions.showWeekNumber) {\n      tr.appendChild(this.renderWeekNumberContent());\n    }\n    var workTd = createElement('td');\n    var levels = this.colLevels.slice(0);\n    if (this.parent.virtualScrollModule) {\n      this.resetColLevels();\n    }\n    var wrap = createElement('div', {\n      className: cls.CONTENT_WRAP_CLASS\n    });\n    var contentArea = this.renderContentArea();\n    if (this.parent.currentView === 'Month') {\n      wrap.appendChild(contentArea);\n    } else {\n      var monthAgendaWrapper = createElement('div', {\n        className: cls.TABLE_CONTAINER_CLASS\n      });\n      monthAgendaWrapper.appendChild(contentArea);\n      wrap.appendChild(monthAgendaWrapper);\n    }\n    EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n    workTd.appendChild(wrap);\n    tr.appendChild(workTd);\n    if (this.parent.virtualScrollModule) {\n      this.colLevels = levels;\n      this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n    }\n    this.element.querySelector('tbody').appendChild(tr);\n    this.renderAppointmentContainer();\n  };\n  Month.prototype.renderWeekNumberContent = function () {\n    var dateCol = this.renderDates.map(function (date) {\n      return new Date(+date);\n    });\n    var td = createElement('td');\n    var contentWrapper = createElement('div', {\n      className: cls.WEEK_NUMBER_WRAPPER_CLASS\n    });\n    td.appendChild(contentWrapper);\n    var contentWrapTable = this.createTableLayout();\n    contentWrapper.appendChild(contentWrapTable);\n    var noOfDays = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : this.parent.activeViewOptions.workDays.length;\n    for (var i = 0, length_1 = this.renderDates.length / noOfDays; i < length_1; i++) {\n      var dates = dateCol.splice(0, noOfDays);\n      var weekNumber = this.parent.getWeekNumberContent(dates);\n      contentWrapTable.querySelector('tbody').appendChild(this.createWeekNumberElement(weekNumber));\n    }\n    return td;\n  };\n  Month.prototype.renderAppointmentContainer = function () {\n    //Here needs to render mobile view appointment details on selected date\n  };\n  Month.prototype.renderDatesHeader = function () {\n    var container = createElement('div', {\n      className: cls.DATE_HEADER_CONTAINER_CLASS\n    });\n    var wrap = createElement('div', {\n      className: cls.DATE_HEADER_WRAP_CLASS\n    });\n    container.appendChild(wrap);\n    var table = this.createTableLayout();\n    if (this.parent.currentView === 'Month') {\n      var thead = createElement('thead');\n      thead.appendChild(createElement('tr'));\n      prepend([thead], table);\n    }\n    this.createColGroup(table, this.colLevels[this.colLevels.length - 1]);\n    var trEle = createElement('tr');\n    for (var i = 0; i < this.colLevels.length; i++) {\n      var level = this.colLevels[parseInt(i.toString(), 10)];\n      var ntr = trEle.cloneNode();\n      for (var j = 0; j < level.length; j++) {\n        var td = level[parseInt(j.toString(), 10)];\n        ntr.appendChild(this.createHeaderCell(td));\n      }\n      table.querySelector('tbody').appendChild(ntr);\n    }\n    wrap.appendChild(table);\n    return container;\n  };\n  Month.prototype.createHeaderCell = function (td) {\n    var tdEle = createElement('td');\n    this.addAttributes(td, tdEle);\n    if (td.type === 'monthDay') {\n      var ele = createElement('span', {\n        innerHTML: util.capitalizeFirstWord(this.parent.getDayNames(this.dayNameFormat)[td.date.getDay()], 'single')\n      });\n      tdEle.appendChild(ele);\n    }\n    if (td.type === 'resourceHeader') {\n      this.setResourceHeaderContent(tdEle, td);\n    }\n    if (td.type === 'dateHeader') {\n      addClass([tdEle], cls.DATE_HEADER_CLASS);\n      tdEle.setAttribute('data-date', td.date.getTime().toString());\n      if (this.parent.activeViewOptions.dateHeaderTemplate) {\n        var cellArgs = {\n          date: td.date,\n          type: td.type\n        };\n        var elementId = this.parent.element.id + '_';\n        var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n        var templateId = elementId + viewName + 'dateHeaderTemplate';\n        var dateTemplate = [].slice.call(this.parent.getDateHeaderTemplate()(cellArgs, this.parent, 'dateHeaderTemplate', templateId, false));\n        if (dateTemplate && dateTemplate.length) {\n          append(dateTemplate, tdEle);\n        }\n      } else {\n        var ele = createElement('span', {\n          className: cls.NAVIGATE_CLASS\n        });\n        var skeleton = 'full';\n        var title = this.parent.globalize.formatDate(td.date, {\n          skeleton: skeleton,\n          calendar: this.parent.getCalendarMode()\n        });\n        ele.setAttribute('title', util.capitalizeFirstWord(title, 'multiple'));\n        var innerText = this.parent.calendarUtil.isMonthStart(td.date) && !this.isCurrentDate(td.date) && !this.parent.isAdaptive ? this.parent.globalize.formatDate(td.date, {\n          format: 'MMM d',\n          calendar: this.parent.getCalendarMode()\n        }) : this.parent.globalize.formatDate(td.date, {\n          skeleton: 'd',\n          calendar: this.parent.getCalendarMode()\n        });\n        ele.innerHTML = util.capitalizeFirstWord(innerText, 'single');\n        tdEle.appendChild(ele);\n      }\n      this.wireCellEvents(tdEle);\n    }\n    var args = {\n      elementType: td.type,\n      element: tdEle,\n      date: td.date,\n      groupIndex: td.groupIndex\n    };\n    this.parent.trigger(event.renderCell, args);\n    return tdEle;\n  };\n  Month.prototype.getContentSlots = function () {\n    if (!(this.colLevels[this.colLevels.length - 1] && this.colLevels[this.colLevels.length - 1][0])) {\n      return [];\n    }\n    var slotDatas = [];\n    var prepareSlots = function (rowIndex, renderDate, resData, classList) {\n      var data = {\n        date: new Date(+renderDate),\n        groupIndex: resData.groupIndex,\n        workDays: resData.workDays,\n        type: 'monthCells',\n        className: classList || [cls.WORK_CELLS_CLASS]\n      };\n      if (!slotDatas[parseInt(rowIndex.toString(), 10)]) {\n        slotDatas[parseInt(rowIndex.toString(), 10)] = [];\n      }\n      slotDatas[parseInt(rowIndex.toString(), 10)].push(data);\n    };\n    var includeResource = this.parent.currentView !== 'MonthAgenda' && this.parent.activeViewOptions.group.resources.length > 0;\n    if (includeResource && !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeViewOptions.group.byDate) {\n      for (var _i = 0, _a = this.colLevels[this.colLevels.length - 2]; _i < _a.length; _i++) {\n        var res = _a[_i];\n        var dates = res.renderDates.map(function (date) {\n          return new Date(+date);\n        });\n        var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : res.workDays.length;\n        for (var i = 0; i < res.renderDates.length / count; i++) {\n          var colDates = dates.splice(0, count);\n          for (var _b = 0, colDates_1 = colDates; _b < colDates_1.length; _b++) {\n            var colDate = colDates_1[_b];\n            prepareSlots(i, colDate, res);\n          }\n        }\n      }\n    } else {\n      var dates = this.renderDates.map(function (date) {\n        return new Date(+date);\n      });\n      var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : this.parent.activeViewOptions.workDays.length;\n      var level = this.colLevels.slice(0, 1)[0];\n      var startIndex = this.renderDates.map(Number).indexOf(+level[0].date);\n      for (var i = 0; i < this.renderDates.length / count; i++) {\n        var colDates = dates.splice(0, count);\n        var k = startIndex;\n        var _loop_1 = function (j) {\n          var colDate = colDates[parseInt(k.toString(), 10)];\n          k++;\n          if (includeResource) {\n            var lastRow = this_1.colLevels[this_1.colLevels.length - 1];\n            var rowCount = lastRow.length / count;\n            var resourcesTd = lastRow.slice(0, rowCount);\n            if (this_1.parent.activeViewOptions.group.hideNonWorkingDays) {\n              resourcesTd = lastRow.filter(function (x) {\n                return x.date.getDay() === colDate.getDay();\n              });\n              if (resourcesTd.length === 0) {\n                j = j - 1;\n                return out_j_1 = j, \"continue\";\n              }\n            }\n            for (var resIndex = 0; resIndex < resourcesTd.length; resIndex++) {\n              var clsList = void 0;\n              if (resIndex !== 0) {\n                clsList = [cls.WORK_CELLS_CLASS, cls.DISABLE_DATE];\n              }\n              prepareSlots(i, colDate, resourcesTd[parseInt(resIndex.toString(), 10)], clsList);\n            }\n          } else {\n            prepareSlots(i, colDate, this_1.colLevels[this_1.colLevels.length - 1][0]);\n          }\n          out_j_1 = j;\n        };\n        var this_1 = this,\n          out_j_1;\n        for (var j = startIndex; j < this.colLevels[0].length + startIndex && j < colDates.length; j++) {\n          _loop_1(j);\n          j = out_j_1;\n        }\n      }\n    }\n    return slotDatas;\n  };\n  Month.prototype.updateClassList = function (data) {\n    if (!this.isCustomMonth() && this.isOtherMonth(data.date)) {\n      data.className.push(cls.OTHERMONTH_CLASS);\n    }\n    if (!this.parent.isMinMaxDate(data.date)) {\n      data.className.push(cls.DISABLE_DATES);\n    }\n    this.updateSelectedCellClass(data);\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  Month.prototype.updateSelectedCellClass = function (data) {\n    return;\n  };\n  Month.prototype.isOtherMonth = function (date) {\n    return date.getTime() < this.monthDates.start.getTime() || date.getTime() > this.monthDates.end.getTime();\n  };\n  Month.prototype.renderContentArea = function () {\n    var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n    this.setAriaAttributes(tbl);\n    this.addAutoHeightClass(tbl);\n    if (this.parent.currentView === 'TimelineMonth') {\n      this.createColGroup(tbl, this.colLevels[this.colLevels.length - 1]);\n    }\n    var monthDate = new Date(this.parent.selectedDate.getTime());\n    this.monthDates = {\n      start: this.parent.calendarUtil.firstDateOfMonth(monthDate),\n      end: this.parent.calendarUtil.lastDateOfMonth(util.addMonths(monthDate, this.parent.activeViewOptions.interval - 1))\n    };\n    var tBody = tbl.querySelector('tbody');\n    append(this.getContentRows(), tBody);\n    this.wireCellEvents(tBody);\n    return tbl;\n  };\n  Month.prototype.getContentRows = function () {\n    var trows = [];\n    var tr = createElement('tr');\n    var td = createElement('td', {\n      attrs: {\n        'aria-selected': 'false'\n      }\n    });\n    var slotDatas = this.getContentSlots();\n    for (var row = 0; row < slotDatas.length; row++) {\n      var ntr = tr.cloneNode();\n      for (var col = 0; col < slotDatas[parseInt(row.toString(), 10)].length; col++) {\n        var ntd = this.createContentTd(slotDatas[parseInt(row.toString(), 10)][parseInt(col.toString(), 10)], td);\n        ntr.appendChild(ntd);\n      }\n      trows.push(ntr);\n    }\n    return trows;\n  };\n  Month.prototype.createContentTd = function (data, td) {\n    var ntd = td.cloneNode();\n    if (data.colSpan) {\n      ntd.setAttribute('colspan', data.colSpan.toString());\n    }\n    this.updateClassList(data);\n    var type = data.type;\n    if (data.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n      data.className.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n      type = 'resourceGroupCells';\n    }\n    if (this.parent.workHours.highlight && this.isWorkDay(data.date, data.workDays)) {\n      data.className.push(cls.WORKDAY_CLASS);\n    }\n    if (this.isCurrentDate(data.date)) {\n      data.className.push(cls.CURRENTDATE_CLASS);\n    }\n    addClass([ntd], data.className);\n    ntd.setAttribute('data-date', data.date.getTime().toString());\n    if (!isNullOrUndefined(data.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n      var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : data.groupIndex;\n      ntd.setAttribute('data-group-index', '' + groupIndex);\n    }\n    this.renderDateHeaderElement(data, ntd);\n    if (this.parent.activeViewOptions.cellTemplate) {\n      var args_1 = {\n        date: data.date,\n        type: type,\n        groupIndex: data.groupIndex\n      };\n      var scheduleId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.cellTemplateName;\n      var templateId = scheduleId + viewName + 'cellTemplate';\n      var cellTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false));\n      append(cellTemplate, ntd);\n    }\n    var args = {\n      elementType: type,\n      element: ntd,\n      date: data.date,\n      groupIndex: data.groupIndex\n    };\n    this.parent.trigger(event.renderCell, args);\n    return ntd;\n  };\n  Month.prototype.renderDateHeaderElement = function (data, ntd) {\n    if (this.parent.currentView === 'TimelineMonth') {\n      return;\n    }\n    var dateHeader = createElement('div', {\n      className: cls.DATE_HEADER_CLASS\n    });\n    if (this.parent.activeViewOptions.cellHeaderTemplate) {\n      var args = {\n        date: data.date,\n        type: data.type,\n        groupIndex: data.groupIndex\n      };\n      var scheduleId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.cellHeaderTemplateName;\n      var templateId = scheduleId + viewName + 'cellHeaderTemplate';\n      var cellHeaderTemplate = [].slice.call(this.parent.getCellHeaderTemplate()(args, this.parent, 'cellHeaderTemplate', templateId, false));\n      append(cellHeaderTemplate, dateHeader);\n    } else {\n      var innerText = this.parent.calendarUtil.isMonthStart(data.date) && !this.isCurrentDate(data.date) && !this.parent.isAdaptive ? this.parent.globalize.formatDate(data.date, {\n        format: 'MMM d',\n        calendar: this.parent.getCalendarMode()\n      }) : this.parent.globalize.formatDate(data.date, {\n        skeleton: 'd',\n        calendar: this.parent.getCalendarMode()\n      });\n      dateHeader.innerHTML = util.capitalizeFirstWord(innerText, 'single');\n    }\n    ntd.appendChild(dateHeader);\n    if (this.getModuleName() === 'month') {\n      addClass([dateHeader], cls.NAVIGATE_CLASS);\n      var skeleton = 'full';\n      var announcementText = this.parent.globalize.formatDate(data.date, {\n        skeleton: skeleton,\n        calendar: this.parent.getCalendarMode()\n      });\n      ntd.setAttribute('aria-label', announcementText);\n    }\n  };\n  Month.prototype.getMonthStart = function (currentDate) {\n    var useDisplayDate = this.parent.currentView === 'Month' && !isNullOrUndefined(this.parent.activeViewOptions.displayDate) && (this.parent.uiStateValues.isCustomMonth || this.isCustomRange());\n    var date = useDisplayDate ? this.parent.activeViewOptions.displayDate : !(this.parent.uiStateValues.isCustomMonth || this.isCustomRange()) && this.isCustomMonth() ? currentDate : this.parent.calendarUtil.firstDateOfMonth(currentDate);\n    var monthStart = util.getWeekFirstDate(date, this.parent.activeViewOptions.firstDayOfWeek);\n    return new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n  };\n  Month.prototype.getMonthEnd = function (currentDate) {\n    if (this.isCustomMonth()) {\n      var start = this.getMonthStart(currentDate);\n      var numberOfDays = util.WEEK_LENGTH * (this.parent.activeViewOptions.numberOfWeeks > 0 ? this.parent.activeViewOptions.numberOfWeeks : util.DEFAULT_WEEKS);\n      return util.addDays(start, numberOfDays - 1);\n    } else {\n      var endDate = util.addMonths(currentDate, this.parent.activeViewOptions.interval - 1);\n      var lastWeekOfMonth = util.getWeekFirstDate(this.parent.calendarUtil.lastDateOfMonth(endDate), this.parent.activeViewOptions.firstDayOfWeek);\n      return util.addDays(lastWeekOfMonth, util.WEEK_LENGTH - 1);\n    }\n  };\n  Month.prototype.isCustomRange = function () {\n    var dates = this.parent.getCurrentViewDates();\n    if (dates && dates.length > 0) {\n      var selectedTime = util.resetTime(this.parent.selectedDate).getTime();\n      var weekFirstDate = util.getWeekFirstDate(dates[dates.length - 1], this.parent.activeViewOptions.firstDayOfWeek);\n      return !(selectedTime >= util.getWeekFirstDate(dates[0], this.parent.activeViewOptions.firstDayOfWeek).getTime() && selectedTime <= util.addDays(weekFirstDate, 6).getTime());\n    }\n    return false;\n  };\n  Month.prototype.getRenderDates = function (workDays) {\n    var renderDates = [];\n    var currentDate = util.resetTime(this.parent.selectedDate);\n    var start = this.getMonthStart(currentDate);\n    var monthEnd = this.getMonthEnd(currentDate);\n    do {\n      if (this.parent.activeViewOptions.showWeekend) {\n        renderDates.push(start);\n      } else {\n        if (this.isWorkDay(start, workDays)) {\n          renderDates.push(start);\n        }\n      }\n      start = util.addDays(start, 1);\n      if (start.getHours() > 0) {\n        start = util.resetTime(start);\n      }\n    } while (start.getTime() <= monthEnd.getTime());\n    if (!workDays) {\n      this.renderDates = renderDates;\n    }\n    if (this.parent.headerModule) {\n      this.parent.headerModule.previousNextIconHandler();\n    }\n    return renderDates;\n  };\n  Month.prototype.getNextPreviousDate = function (type) {\n    if (this.isCustomMonth()) {\n      var dates = this.parent.getCurrentViewDates();\n      var date = util.getWeekFirstDate(type === 'next' ? dates[dates.length - 1] : dates[0], this.parent.activeViewOptions.firstDayOfWeek);\n      return util.addDays(date, type === 'next' ? util.WEEK_LENGTH : -(this.parent.activeViewOptions.numberOfWeeks > 0 ? this.parent.activeViewOptions.numberOfWeeks : util.DEFAULT_WEEKS) * util.WEEK_LENGTH);\n    } else {\n      return util.addMonths(this.parent.selectedDate, (type === 'next' ? 1 : -1) * this.parent.activeViewOptions.interval);\n    }\n  };\n  Month.prototype.getStartDate = function () {\n    return this.getMonthStart(this.parent.selectedDate);\n  };\n  Month.prototype.getEndDate = function () {\n    return this.getMonthEnd(this.parent.selectedDate);\n  };\n  Month.prototype.getEndDateFromStartDate = function (start) {\n    return util.addDays(new Date(start.getTime()), 1);\n  };\n  Month.prototype.getDateRangeText = function () {\n    if (this.parent.isAdaptive || isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n      var startDate = this.parent.selectedDate;\n      var endDate = void 0;\n      var updateCustomRange = false;\n      if (this.isCustomMonth()) {\n        var dates = this.parent.getCurrentViewDates();\n        updateCustomRange = dates[0].getMonth() !== dates[dates.length - 1].getMonth() || dates[0].getFullYear() !== dates[dates.length - 1].getFullYear();\n        if (updateCustomRange) {\n          startDate = dates[0];\n          endDate = dates[dates.length - 1];\n        }\n      }\n      var isUpdateDateRange = this.parent.currentView !== 'Month' || !this.isCustomMonth();\n      if (this.parent.activeViewOptions.interval > 1 && isUpdateDateRange || updateCustomRange) {\n        endDate = endDate ? endDate : util.addMonths(util.lastDateOfMonth(startDate), this.parent.activeViewOptions.interval - 1);\n        if (startDate.getFullYear() === endDate.getFullYear()) {\n          var monthNames = this.parent.globalize.formatDate(startDate, {\n            format: 'MMMM',\n            calendar: this.parent.getCalendarMode()\n          }) + ' - ' + this.parent.globalize.formatDate(endDate, {\n            format: 'MMMM ',\n            calendar: this.parent.getCalendarMode()\n          }) + this.parent.globalize.formatDate(endDate, {\n            skeleton: 'y',\n            calendar: this.parent.getCalendarMode()\n          });\n          return util.capitalizeFirstWord(monthNames, 'single');\n        }\n        var text = this.parent.globalize.formatDate(startDate, {\n          format: 'MMMM',\n          calendar: this.parent.getCalendarMode()\n        }) + ' ' + startDate.getFullYear() + ' - ' + this.parent.globalize.formatDate(endDate, {\n          format: 'MMMM ',\n          calendar: this.parent.getCalendarMode()\n        }) + this.parent.globalize.formatDate(endDate, {\n          skeleton: 'y',\n          calendar: this.parent.getCalendarMode()\n        });\n        return util.capitalizeFirstWord(text, 'single');\n      }\n      var format = this.parent.activeViewOptions.dateFormat ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n      return util.capitalizeFirstWord(this.parent.globalize.formatDate(startDate, {\n        format: format,\n        calendar: this.parent.getCalendarMode()\n      }), 'single');\n    }\n    return this.formatDateRange(this.parent.selectedDate);\n  };\n  Month.prototype.getLabelText = function (view) {\n    return this.parent.localeObj.getConstant(view) + ' of ' + util.capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, {\n      format: 'MMMM y',\n      calendar: this.parent.getCalendarMode()\n    }), 'single');\n  };\n  Month.prototype.createWeekNumberElement = function (text) {\n    var tr = createElement('tr');\n    var td = createElement('td', {\n      className: cls.WEEK_NUMBER_CLASS,\n      attrs: {\n        'title': text ? this.parent.localeObj.getConstant('week') + ' ' + text : ''\n      },\n      innerHTML: text || ''\n    });\n    tr.appendChild(td);\n    var args = {\n      elementType: 'weekNumberCell',\n      element: td\n    };\n    this.parent.trigger(event.renderCell, args);\n    return tr;\n  };\n  Month.prototype.unWireEvents = function () {\n    var contentScrollableEle = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    if (contentScrollableEle) {\n      EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n    }\n  };\n  Month.prototype.isCustomMonth = function () {\n    return this.parent.currentView === 'Month' && (!isNullOrUndefined(this.parent.activeViewOptions.displayDate) || this.parent.activeViewOptions.numberOfWeeks > 0);\n  };\n  Month.prototype.getModuleName = function () {\n    return 'month';\n  };\n  Month.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    if (this.element) {\n      if (this.monthEvent) {\n        this.monthEvent.destroy();\n        this.monthEvent = null;\n      }\n      this.unWireEvents();\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.destroy();\n      }\n      if (this.parent.scheduleTouchModule) {\n        this.parent.scheduleTouchModule.resetValues();\n      }\n      _super.prototype.destroy.call(this);\n    }\n  };\n  return Month;\n}(ViewBase);\nexport { Month };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","EventHandler","formatUnit","isNullOrUndefined","createElement","addClass","append","prepend","remove","extend","ViewBase","MonthEvent","util","event","cls","Month","_super","parent","_this","call","dayNameFormat","viewClass","isInverseTableSelect","monthEvent","monthDates","addEventListener","on","scrollUiUpdate","onScrollUIUpdate","dataReady","onDataReady","cellClick","onCellClick","removeEventListener","off","args","renderAppointments","notify","eventsLoaded","onContentScroll","e","removeNewEventElement","virtualScroll","scrollTopPanel","target","scrollLeftPanel","uiStateValues","top","scrollTop","left","scrollLeft","setPersistence","leftPanel","getLeftPanelElement","element","querySelector","WEEK_NUMBER_WRAPPER_CLASS","headerHeight","getHeaderBarHeight","header","getDatesHeaderElement","content","getContentAreaElement","height","offsetHeight","setContentHeight","scrollBarWidth","getScrollBarWidth","firstElementChild","style","cssProperties","rtlBorder","rtlPadding","offsetWidth","clientWidth","border","padding","setColWidth","scrollPosition","isPreventScrollUpdate","currentView","top_1","isInitial","scrollToSelectedDate","retainScrollPosition","headerCell","HEADER_CELLS_CLASS","selectedDate","getTime","toString","enableRtl","offsetLeft","getContentTable","leftPanelElement","activeViewOptions","interval","CONTENT_TABLE_CLASS","getScrollXIndent","generateColumnLevels","colLevels","level","getDateSlots","renderDates","workDays","group","resources","length","resourceBase","generateResourceLevels","isGroupAdaptive","lastResourceLevel","resourceLevel","groupIndex","levels_1","byDate","hideNonWorkingDays","index","findIndex","x","date","getDay","slice","push","count","showWeekend","WEEK_LENGTH","dateSlots","isCurrentMonth","col","classList","currentDateIndex","map","indexOf","currentTimezoneDate","CURRENT_DAY_CLASS","parseInt","type","className","colSpan","getDayNameFormat","isAdaptive","renderLayout","setPanel","TABLE_WRAP_CLASS","clsList","allowVirtualScrolling","VIRTUAL_SCROLL_CLASS","rowAutoHeight","eventSettings","ignoreWhitespace","IGNORE_WHITESPACE","renderPanel","appendChild","createTableLayout","OUTER_TABLE_CLASS","setAttribute","renderHeader","renderContent","activeView","getPanel","RESOURCE_TOOLBAR_CONTAINER","renderResourceMobileLayout","contentReady","isCustomMonth","refreshHeader","dateHeader","DATE_HEADER_WRAP_CLASS","wireCellEvents","add","workCellAction","cellMouseDown","cellDblClick","tr","renderLeftIndent","dateTd","renderDatesHeader","showWeekNumber","renderedResources","renderWeekNumberContent","workTd","levels","virtualScrollModule","resetColLevels","wrap","CONTENT_WRAP_CLASS","contentArea","renderContentArea","monthAgendaWrapper","TABLE_CONTAINER_CLASS","renderVirtualTrack","renderAppointmentContainer","dateCol","Date","td","contentWrapper","contentWrapTable","noOfDays","i","length_1","dates","splice","weekNumber","getWeekNumberContent","createWeekNumberElement","container","DATE_HEADER_CONTAINER_CLASS","table","thead","createColGroup","trEle","ntr","cloneNode","j","createHeaderCell","tdEle","addAttributes","ele","innerHTML","capitalizeFirstWord","getDayNames","setResourceHeaderContent","DATE_HEADER_CLASS","dateHeaderTemplate","cellArgs","elementId","id","viewName","dateHeaderTemplateName","templateId","dateTemplate","getDateHeaderTemplate","NAVIGATE_CLASS","skeleton","title","globalize","formatDate","calendar","getCalendarMode","innerText","calendarUtil","isMonthStart","isCurrentDate","format","elementType","trigger","renderCell","getContentSlots","slotDatas","prepareSlots","rowIndex","renderDate","resData","data","WORK_CELLS_CLASS","includeResource","_i","_a","res","colDates","_b","colDates_1","colDate","startIndex","Number","k","_loop_1","lastRow","this_1","rowCount","resourcesTd","filter","out_j_1","resIndex","DISABLE_DATE","updateClassList","isOtherMonth","OTHERMONTH_CLASS","isMinMaxDate","DISABLE_DATES","updateSelectedCellClass","start","end","tbl","setAriaAttributes","addAutoHeightClass","monthDate","firstDateOfMonth","lastDateOfMonth","addMonths","tBody","getContentRows","trows","attrs","row","ntd","createContentTd","RESOURCE_PARENT_CLASS","RESOURCE_GROUP_CELLS_CLASS","workHours","highlight","isWorkDay","WORKDAY_CLASS","CURRENTDATE_CLASS","renderDateHeaderElement","cellTemplate","args_1","scheduleId","cellTemplateName","getCellTemplate","cellHeaderTemplate","cellHeaderTemplateName","getCellHeaderTemplate","getModuleName","announcementText","getMonthStart","currentDate","useDisplayDate","displayDate","isCustomRange","monthStart","getWeekFirstDate","firstDayOfWeek","getFullYear","getMonth","getDate","getMonthEnd","numberOfDays","numberOfWeeks","DEFAULT_WEEKS","addDays","endDate","lastWeekOfMonth","getCurrentViewDates","selectedTime","resetTime","weekFirstDate","getRenderDates","monthEnd","getHours","headerModule","previousNextIconHandler","getNextPreviousDate","getStartDate","getEndDate","getEndDateFromStartDate","getDateRangeText","dateFormat","startDate","updateCustomRange","isUpdateDateRange","monthNames","text","formatDateRange","getLabelText","view","localeObj","getConstant","WEEK_NUMBER_CLASS","unWireEvents","contentScrollableEle","destroy","isDestroyed","scheduleTouchModule","resetValues"],"sources":["/Users/annalisekimura/Desktop/Calendar/calendar/node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/month.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { EventHandler, formatUnit, isNullOrUndefined, createElement, addClass, append, prepend, remove, extend } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * month view\n */\nvar Month = /** @class */ (function (_super) {\n    __extends(Month, _super);\n    function Month(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dayNameFormat = 'wide';\n        _this.viewClass = 'e-month-view';\n        _this.isInverseTableSelect = false;\n        _this.monthEvent = null;\n        _this.monthDates = {};\n        return _this;\n    }\n    Month.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.onScrollUIUpdate, this);\n        this.parent.on(event.dataReady, this.onDataReady, this);\n        this.parent.on(event.cellClick, this.onCellClick, this);\n    };\n    Month.prototype.removeEventListener = function () {\n        if (this.parent) {\n            this.parent.off(event.scrollUiUpdate, this.onScrollUIUpdate);\n            this.parent.off(event.dataReady, this.onDataReady);\n            this.parent.off(event.cellClick, this.onCellClick);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Month.prototype.onDataReady = function (args) {\n        this.monthEvent = new MonthEvent(this.parent);\n        this.monthEvent.renderAppointments();\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Month.prototype.onCellClick = function (event) { };\n    Month.prototype.onContentScroll = function (e) {\n        this.parent.removeNewEventElement();\n        this.parent.notify(event.virtualScroll, e);\n        this.scrollTopPanel(e.target);\n        this.scrollLeftPanel(e.target);\n        this.parent.uiStateValues.top = e.target.scrollTop;\n        this.parent.uiStateValues.left = e.target.scrollLeft;\n        this.setPersistence();\n    };\n    Month.prototype.scrollLeftPanel = function (target) {\n        var leftPanel = this.getLeftPanelElement();\n        if (leftPanel) {\n            leftPanel.scrollTop = target.scrollTop;\n        }\n    };\n    Month.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.WEEK_NUMBER_WRAPPER_CLASS);\n    };\n    Month.prototype.onScrollUIUpdate = function (args) {\n        var headerHeight = this.getHeaderBarHeight();\n        var header = this.getDatesHeaderElement();\n        var content = this.getContentAreaElement();\n        var height = this.parent.element.offsetHeight - headerHeight - header.offsetHeight;\n        var leftPanel = this.getLeftPanelElement();\n        if (this.parent.height !== 'auto') {\n            this.setContentHeight(content, leftPanel, height);\n        }\n        var scrollBarWidth = util.getScrollBarWidth();\n        header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n        header.style[args.cssProperties.rtlPadding] = '';\n        if (content.offsetWidth - content.clientWidth > 0) {\n            header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        }\n        else {\n            header.firstElementChild.style[args.cssProperties.border] = '';\n            header.style[args.cssProperties.padding] = '';\n        }\n        this.setColWidth(content);\n        if (args.scrollPosition || !args.isPreventScrollUpdate && this.parent.currentView === 'TimelineMonth') {\n            var top_1 = this.parent.currentView === 'TimelineMonth' ? this.parent.uiStateValues.top : args.scrollPosition.top;\n            if (leftPanel) {\n                leftPanel.scrollTop = top_1;\n            }\n            content.scrollTop = top_1;\n            if (this.parent.uiStateValues.isInitial) {\n                this.scrollToSelectedDate();\n                this.parent.uiStateValues.isInitial = false;\n            }\n            else {\n                content.scrollLeft = this.parent.currentView === 'TimelineMonth' ? this.parent.uiStateValues.left :\n                    args.scrollPosition.left;\n            }\n        }\n        else {\n            this.scrollToSelectedDate();\n        }\n        this.retainScrollPosition();\n    };\n    Month.prototype.scrollToSelectedDate = function () {\n        var headerCell = this.element.querySelector('.' + cls.HEADER_CELLS_CLASS + '[data-date=\"'\n            + this.parent.selectedDate.getTime().toString() + '\"]');\n        var content = this.getContentAreaElement();\n        if (!isNullOrUndefined(headerCell)) {\n            content.scrollLeft = !this.parent.enableRtl ?\n                headerCell.offsetLeft : -(this.parent.getContentTable().offsetWidth - headerCell.offsetLeft - headerCell.offsetWidth);\n        }\n        else {\n            content.scrollLeft = 0;\n        }\n        if (content.scrollLeft === 0 && this.parent.uiStateValues.isInitial) {\n            this.parent.uiStateValues.left = 0;\n        }\n    };\n    Month.prototype.setContentHeight = function (content, leftPanelElement, height) {\n        content.style.height = 'auto';\n        if (this.parent.currentView === 'Month') {\n            content.style.height = formatUnit(height);\n        }\n        if (leftPanelElement) {\n            if (this.parent.currentView === 'MonthAgenda') {\n                height = (this.parent.activeViewOptions.interval > 1) ?\n                    this.getContentAreaElement().firstElementChild.offsetHeight :\n                    this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).offsetHeight;\n            }\n            leftPanelElement.style.height = 'auto';\n            leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n        }\n    };\n    Month.prototype.generateColumnLevels = function () {\n        var colLevels = [];\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            colLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.currentView === 'MonthAgenda') {\n                colLevels = [level];\n            }\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                var levels_1 = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays);\n                if (this.parent.activeViewOptions.group.byDate && this.parent.activeViewOptions.group.hideNonWorkingDays) {\n                    var index = levels_1.findIndex(function (x, index) {\n                        return index !== 0 && x.date.getDay() === levels_1[0].date.getDay();\n                    });\n                    levels_1 = index > -1 ? levels_1.slice(0, index) : levels_1;\n                }\n                colLevels = [levels_1];\n            }\n        }\n        else {\n            colLevels.push(level);\n        }\n        this.colLevels = colLevels;\n        return colLevels;\n    };\n    Month.prototype.getDateSlots = function (renderDates, workDays) {\n        var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : workDays.length;\n        var dateSlots = [];\n        var isCurrentMonth = this.isCurrentMonth(this.parent.selectedDate);\n        for (var col = 0; col < count; col++) {\n            var classList = [cls.HEADER_CELLS_CLASS];\n            var currentDateIndex = renderDates.slice(0, count).map(function (date) { return date.getDay(); });\n            if (isCurrentMonth && currentDateIndex.indexOf(this.parent.currentTimezoneDate.getDay()) === col) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateSlots.push({ date: renderDates[parseInt(col.toString(), 10)], type: 'monthDay', className: classList, colSpan: 1, workDays: workDays });\n        }\n        return dateSlots;\n    };\n    Month.prototype.getDayNameFormat = function () {\n        if (this.parent.isAdaptive || this.parent.activeViewOptions.group.resources.length > 0) {\n            return 'abbreviated';\n        }\n        return 'wide';\n    };\n    Month.prototype.renderLayout = function (type) {\n        this.dayNameFormat = this.getDayNameFormat();\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var clsList = [this.viewClass];\n        clsList.push(type);\n        if (this.parent.activeViewOptions.group.byDate) {\n            clsList.push('e-by-date');\n            if (this.parent.currentView !== 'Month') {\n                this.parent.activeViewOptions.group.hideNonWorkingDays = false;\n            }\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling && !this.parent.uiStateValues.isGroupAdaptive) {\n            clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n        }\n        if (this.parent.rowAutoHeight && this.parent.eventSettings.ignoreWhitespace) {\n            clsList.push(cls.IGNORE_WHITESPACE);\n        }\n        addClass([this.element], clsList);\n        this.renderPanel(type);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.colLevels = this.generateColumnLevels();\n        this.renderHeader();\n        this.renderContent();\n        var target = (this.parent.currentView === 'MonthAgenda') ? this.parent.activeView.getPanel() : this.parent.element;\n        if (this.parent.uiStateValues.isGroupAdaptive && !target.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n        if (this.parent.uiStateValues.isCustomMonth) {\n            this.parent.uiStateValues.isCustomMonth = false;\n        }\n    };\n    Month.prototype.refreshHeader = function () {\n        remove(this.element.querySelector('tbody tr'));\n        this.renderHeader();\n        this.parent.notify(event.contentReady, {});\n        var dateHeader = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        if (dateHeader) {\n            dateHeader.scrollLeft = this.parent.uiStateValues.left;\n        }\n    };\n    Month.prototype.wireCellEvents = function (element) {\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n    };\n    Month.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        this.renderLeftIndent(tr);\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    Month.prototype.renderLeftIndent = function (tr) {\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(createElement('td', { className: 'e-left-indent' }));\n        }\n    };\n    Month.prototype.renderContent = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.renderedResources = extend([], this.parent.resourceBase.lastResourceLevel, null, true);\n        }\n        var tr = createElement('tr');\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(this.renderWeekNumberContent());\n        }\n        var workTd = createElement('td');\n        var levels = this.colLevels.slice(0);\n        if (this.parent.virtualScrollModule) {\n            this.resetColLevels();\n        }\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        var contentArea = this.renderContentArea();\n        if (this.parent.currentView === 'Month') {\n            wrap.appendChild(contentArea);\n        }\n        else {\n            var monthAgendaWrapper = createElement('div', { className: cls.TABLE_CONTAINER_CLASS });\n            monthAgendaWrapper.appendChild(contentArea);\n            wrap.appendChild(monthAgendaWrapper);\n        }\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        workTd.appendChild(wrap);\n        tr.appendChild(workTd);\n        if (this.parent.virtualScrollModule) {\n            this.colLevels = levels;\n            this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n        this.renderAppointmentContainer();\n    };\n    Month.prototype.renderWeekNumberContent = function () {\n        var dateCol = this.renderDates.map(function (date) { return new Date(+date); });\n        var td = createElement('td');\n        var contentWrapper = createElement('div', { className: cls.WEEK_NUMBER_WRAPPER_CLASS });\n        td.appendChild(contentWrapper);\n        var contentWrapTable = this.createTableLayout();\n        contentWrapper.appendChild(contentWrapTable);\n        var noOfDays = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH :\n            this.parent.activeViewOptions.workDays.length;\n        for (var i = 0, length_1 = (this.renderDates.length / noOfDays); i < length_1; i++) {\n            var dates = dateCol.splice(0, noOfDays);\n            var weekNumber = this.parent.getWeekNumberContent(dates);\n            contentWrapTable.querySelector('tbody').appendChild(this.createWeekNumberElement(weekNumber));\n        }\n        return td;\n    };\n    Month.prototype.renderAppointmentContainer = function () {\n        //Here needs to render mobile view appointment details on selected date\n    };\n    Month.prototype.renderDatesHeader = function () {\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\n        var wrap = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\n        container.appendChild(wrap);\n        var table = this.createTableLayout();\n        if (this.parent.currentView === 'Month') {\n            var thead = createElement('thead');\n            thead.appendChild(createElement('tr'));\n            prepend([thead], table);\n        }\n        this.createColGroup(table, this.colLevels[this.colLevels.length - 1]);\n        var trEle = createElement('tr');\n        for (var i = 0; i < this.colLevels.length; i++) {\n            var level = this.colLevels[parseInt(i.toString(), 10)];\n            var ntr = trEle.cloneNode();\n            for (var j = 0; j < level.length; j++) {\n                var td = level[parseInt(j.toString(), 10)];\n                ntr.appendChild(this.createHeaderCell(td));\n            }\n            table.querySelector('tbody').appendChild(ntr);\n        }\n        wrap.appendChild(table);\n        return container;\n    };\n    Month.prototype.createHeaderCell = function (td) {\n        var tdEle = createElement('td');\n        this.addAttributes(td, tdEle);\n        if (td.type === 'monthDay') {\n            var ele = createElement('span', { innerHTML: util.capitalizeFirstWord(this.parent.getDayNames(this.dayNameFormat)[td.date.getDay()], 'single') });\n            tdEle.appendChild(ele);\n        }\n        if (td.type === 'resourceHeader') {\n            this.setResourceHeaderContent(tdEle, td);\n        }\n        if (td.type === 'dateHeader') {\n            addClass([tdEle], cls.DATE_HEADER_CLASS);\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\n            if (this.parent.activeViewOptions.dateHeaderTemplate) {\n                var cellArgs = { date: td.date, type: td.type };\n                var elementId = this.parent.element.id + '_';\n                var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n                var templateId = elementId + viewName + 'dateHeaderTemplate';\n                var dateTemplate = [].slice.call(this.parent.getDateHeaderTemplate()(cellArgs, this.parent, 'dateHeaderTemplate', templateId, false));\n                if (dateTemplate && dateTemplate.length) {\n                    append(dateTemplate, tdEle);\n                }\n            }\n            else {\n                var ele = createElement('span', { className: cls.NAVIGATE_CLASS });\n                var skeleton = 'full';\n                var title = this.parent.globalize.formatDate(td.date, { skeleton: skeleton, calendar: this.parent.getCalendarMode() });\n                ele.setAttribute('title', util.capitalizeFirstWord(title, 'multiple'));\n                var innerText = (this.parent.calendarUtil.isMonthStart(td.date) && !this.isCurrentDate(td.date) && !this.parent.isAdaptive) ?\n                    this.parent.globalize.formatDate(td.date, { format: 'MMM d', calendar: this.parent.getCalendarMode() }) :\n                    this.parent.globalize.formatDate(td.date, { skeleton: 'd', calendar: this.parent.getCalendarMode() });\n                ele.innerHTML = util.capitalizeFirstWord(innerText, 'single');\n                tdEle.appendChild(ele);\n            }\n            this.wireCellEvents(tdEle);\n        }\n        var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return tdEle;\n    };\n    Month.prototype.getContentSlots = function () {\n        if (!(this.colLevels[this.colLevels.length - 1] && this.colLevels[this.colLevels.length - 1][0])) {\n            return [];\n        }\n        var slotDatas = [];\n        var prepareSlots = function (rowIndex, renderDate, resData, classList) {\n            var data = {\n                date: new Date(+renderDate), groupIndex: resData.groupIndex, workDays: resData.workDays,\n                type: 'monthCells', className: classList || [cls.WORK_CELLS_CLASS]\n            };\n            if (!slotDatas[parseInt(rowIndex.toString(), 10)]) {\n                slotDatas[parseInt(rowIndex.toString(), 10)] = [];\n            }\n            slotDatas[parseInt(rowIndex.toString(), 10)].push(data);\n        };\n        var includeResource = this.parent.currentView !== 'MonthAgenda' &&\n            this.parent.activeViewOptions.group.resources.length > 0;\n        if (includeResource && !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeViewOptions.group.byDate) {\n            for (var _i = 0, _a = this.colLevels[this.colLevels.length - 2]; _i < _a.length; _i++) {\n                var res = _a[_i];\n                var dates = res.renderDates.map(function (date) { return new Date(+date); });\n                var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : res.workDays.length;\n                for (var i = 0; i < (res.renderDates.length / count); i++) {\n                    var colDates = dates.splice(0, count);\n                    for (var _b = 0, colDates_1 = colDates; _b < colDates_1.length; _b++) {\n                        var colDate = colDates_1[_b];\n                        prepareSlots(i, colDate, res);\n                    }\n                }\n            }\n        }\n        else {\n            var dates = this.renderDates.map(function (date) { return new Date(+date); });\n            var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH :\n                this.parent.activeViewOptions.workDays.length;\n            var level = this.colLevels.slice(0, 1)[0];\n            var startIndex = this.renderDates.map(Number).indexOf(+level[0].date);\n            for (var i = 0; i < (this.renderDates.length / count); i++) {\n                var colDates = dates.splice(0, count);\n                var k = startIndex;\n                var _loop_1 = function (j) {\n                    var colDate = colDates[parseInt(k.toString(), 10)];\n                    k++;\n                    if (includeResource) {\n                        var lastRow = this_1.colLevels[(this_1.colLevels.length - 1)];\n                        var rowCount = lastRow.length / count;\n                        var resourcesTd = lastRow.slice(0, rowCount);\n                        if (this_1.parent.activeViewOptions.group.hideNonWorkingDays) {\n                            resourcesTd = lastRow.filter(function (x) { return x.date.getDay() === colDate.getDay(); });\n                            if (resourcesTd.length === 0) {\n                                j = j - 1;\n                                return out_j_1 = j, \"continue\";\n                            }\n                        }\n                        for (var resIndex = 0; resIndex < resourcesTd.length; resIndex++) {\n                            var clsList = void 0;\n                            if (resIndex !== 0) {\n                                clsList = [cls.WORK_CELLS_CLASS, cls.DISABLE_DATE];\n                            }\n                            prepareSlots(i, colDate, resourcesTd[parseInt(resIndex.toString(), 10)], clsList);\n                        }\n                    }\n                    else {\n                        prepareSlots(i, colDate, this_1.colLevels[this_1.colLevels.length - 1][0]);\n                    }\n                    out_j_1 = j;\n                };\n                var this_1 = this, out_j_1;\n                for (var j = startIndex; j < (this.colLevels[0].length + startIndex) && j < colDates.length; j++) {\n                    _loop_1(j);\n                    j = out_j_1;\n                }\n            }\n        }\n        return slotDatas;\n    };\n    Month.prototype.updateClassList = function (data) {\n        if (!this.isCustomMonth() && this.isOtherMonth(data.date)) {\n            data.className.push(cls.OTHERMONTH_CLASS);\n        }\n        if (!this.parent.isMinMaxDate(data.date)) {\n            data.className.push(cls.DISABLE_DATES);\n        }\n        this.updateSelectedCellClass(data);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Month.prototype.updateSelectedCellClass = function (data) {\n        return;\n    };\n    Month.prototype.isOtherMonth = function (date) {\n        return date.getTime() < this.monthDates.start.getTime() || date.getTime() > this.monthDates.end.getTime();\n    };\n    Month.prototype.renderContentArea = function () {\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.setAriaAttributes(tbl);\n        this.addAutoHeightClass(tbl);\n        if (this.parent.currentView === 'TimelineMonth') {\n            this.createColGroup(tbl, this.colLevels[this.colLevels.length - 1]);\n        }\n        var monthDate = new Date(this.parent.selectedDate.getTime());\n        this.monthDates = {\n            start: this.parent.calendarUtil.firstDateOfMonth(monthDate),\n            end: this.parent.calendarUtil.lastDateOfMonth(util.addMonths(monthDate, this.parent.activeViewOptions.interval - 1))\n        };\n        var tBody = tbl.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n        this.wireCellEvents(tBody);\n        return tbl;\n    };\n    Month.prototype.getContentRows = function () {\n        var trows = [];\n        var tr = createElement('tr');\n        var td = createElement('td', { attrs: { 'aria-selected': 'false' } });\n        var slotDatas = this.getContentSlots();\n        for (var row = 0; row < slotDatas.length; row++) {\n            var ntr = tr.cloneNode();\n            for (var col = 0; col < slotDatas[parseInt(row.toString(), 10)].length; col++) {\n                var ntd = this.createContentTd(slotDatas[parseInt(row.toString(), 10)][parseInt(col.toString(), 10)], td);\n                ntr.appendChild(ntd);\n            }\n            trows.push(ntr);\n        }\n        return trows;\n    };\n    Month.prototype.createContentTd = function (data, td) {\n        var ntd = td.cloneNode();\n        if (data.colSpan) {\n            ntd.setAttribute('colspan', data.colSpan.toString());\n        }\n        this.updateClassList(data);\n        var type = data.type;\n        if (data.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n            data.className.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n            type = 'resourceGroupCells';\n        }\n        if (this.parent.workHours.highlight && this.isWorkDay(data.date, data.workDays)) {\n            data.className.push(cls.WORKDAY_CLASS);\n        }\n        if (this.isCurrentDate(data.date)) {\n            data.className.push(cls.CURRENTDATE_CLASS);\n        }\n        addClass([ntd], data.className);\n        ntd.setAttribute('data-date', data.date.getTime().toString());\n        if (!isNullOrUndefined(data.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n            var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                data.groupIndex;\n            ntd.setAttribute('data-group-index', '' + groupIndex);\n        }\n        this.renderDateHeaderElement(data, ntd);\n        if (this.parent.activeViewOptions.cellTemplate) {\n            var args_1 = { date: data.date, type: type, groupIndex: data.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellTemplateName;\n            var templateId = scheduleId + viewName + 'cellTemplate';\n            var cellTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false));\n            append(cellTemplate, ntd);\n        }\n        var args = { elementType: type, element: ntd, date: data.date, groupIndex: data.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return ntd;\n    };\n    Month.prototype.renderDateHeaderElement = function (data, ntd) {\n        if (this.parent.currentView === 'TimelineMonth') {\n            return;\n        }\n        var dateHeader = createElement('div', { className: cls.DATE_HEADER_CLASS });\n        if (this.parent.activeViewOptions.cellHeaderTemplate) {\n            var args = { date: data.date, type: data.type, groupIndex: data.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellHeaderTemplateName;\n            var templateId = scheduleId + viewName + 'cellHeaderTemplate';\n            var cellHeaderTemplate = [].slice.call(this.parent.getCellHeaderTemplate()(args, this.parent, 'cellHeaderTemplate', templateId, false));\n            append(cellHeaderTemplate, dateHeader);\n        }\n        else {\n            var innerText = (this.parent.calendarUtil.isMonthStart(data.date) && !this.isCurrentDate(data.date) && !this.parent.isAdaptive) ?\n                this.parent.globalize.formatDate(data.date, { format: 'MMM d', calendar: this.parent.getCalendarMode() }) :\n                this.parent.globalize.formatDate(data.date, { skeleton: 'd', calendar: this.parent.getCalendarMode() });\n            dateHeader.innerHTML = util.capitalizeFirstWord(innerText, 'single');\n        }\n        ntd.appendChild(dateHeader);\n        if (this.getModuleName() === 'month') {\n            addClass([dateHeader], cls.NAVIGATE_CLASS);\n            var skeleton = 'full';\n            var announcementText = this.parent.globalize.formatDate(data.date, { skeleton: skeleton, calendar: this.parent.getCalendarMode() });\n            ntd.setAttribute('aria-label', announcementText);\n        }\n    };\n    Month.prototype.getMonthStart = function (currentDate) {\n        var useDisplayDate = this.parent.currentView === 'Month' && !isNullOrUndefined(this.parent.activeViewOptions.displayDate) && (this.parent.uiStateValues.isCustomMonth || this.isCustomRange());\n        var date = useDisplayDate ? this.parent.activeViewOptions.displayDate : !(this.parent.uiStateValues.isCustomMonth ||\n            this.isCustomRange()) && this.isCustomMonth() ? currentDate : this.parent.calendarUtil.firstDateOfMonth(currentDate);\n        var monthStart = util.getWeekFirstDate(date, this.parent.activeViewOptions.firstDayOfWeek);\n        return new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n    };\n    Month.prototype.getMonthEnd = function (currentDate) {\n        if (this.isCustomMonth()) {\n            var start = this.getMonthStart(currentDate);\n            var numberOfDays = util.WEEK_LENGTH * (this.parent.activeViewOptions.numberOfWeeks > 0 ?\n                this.parent.activeViewOptions.numberOfWeeks : util.DEFAULT_WEEKS);\n            return util.addDays(start, (numberOfDays - 1));\n        }\n        else {\n            var endDate = util.addMonths(currentDate, this.parent.activeViewOptions.interval - 1);\n            var lastWeekOfMonth = util.getWeekFirstDate(this.parent.calendarUtil.lastDateOfMonth(endDate), this.parent.activeViewOptions.firstDayOfWeek);\n            return util.addDays(lastWeekOfMonth, util.WEEK_LENGTH - 1);\n        }\n    };\n    Month.prototype.isCustomRange = function () {\n        var dates = this.parent.getCurrentViewDates();\n        if (dates && dates.length > 0) {\n            var selectedTime = util.resetTime(this.parent.selectedDate).getTime();\n            var weekFirstDate = util.getWeekFirstDate(dates[dates.length - 1], this.parent.activeViewOptions.firstDayOfWeek);\n            return !(selectedTime >= util.getWeekFirstDate(dates[0], this.parent.activeViewOptions.firstDayOfWeek).getTime() &&\n                selectedTime <= util.addDays(weekFirstDate, 6).getTime());\n        }\n        return false;\n    };\n    Month.prototype.getRenderDates = function (workDays) {\n        var renderDates = [];\n        var currentDate = util.resetTime(this.parent.selectedDate);\n        var start = this.getMonthStart(currentDate);\n        var monthEnd = this.getMonthEnd(currentDate);\n        do {\n            if (this.parent.activeViewOptions.showWeekend) {\n                renderDates.push(start);\n            }\n            else {\n                if (this.isWorkDay(start, workDays)) {\n                    renderDates.push(start);\n                }\n            }\n            start = util.addDays(start, 1);\n            if (start.getHours() > 0) {\n                start = util.resetTime(start);\n            }\n        } while (start.getTime() <= monthEnd.getTime());\n        if (!workDays) {\n            this.renderDates = renderDates;\n        }\n        if (this.parent.headerModule) {\n            this.parent.headerModule.previousNextIconHandler();\n        }\n        return renderDates;\n    };\n    Month.prototype.getNextPreviousDate = function (type) {\n        if (this.isCustomMonth()) {\n            var dates = this.parent.getCurrentViewDates();\n            var date = util.getWeekFirstDate(type === 'next' ? dates[dates.length - 1]\n                : dates[0], this.parent.activeViewOptions.firstDayOfWeek);\n            return util.addDays(date, type === 'next' ? util.WEEK_LENGTH : -(this.parent.activeViewOptions.numberOfWeeks > 0 ?\n                this.parent.activeViewOptions.numberOfWeeks : util.DEFAULT_WEEKS) * util.WEEK_LENGTH);\n        }\n        else {\n            return util.addMonths(this.parent.selectedDate, ((type === 'next' ? 1 : -1) * this.parent.activeViewOptions.interval));\n        }\n    };\n    Month.prototype.getStartDate = function () {\n        return this.getMonthStart(this.parent.selectedDate);\n    };\n    Month.prototype.getEndDate = function () {\n        return this.getMonthEnd(this.parent.selectedDate);\n    };\n    Month.prototype.getEndDateFromStartDate = function (start) {\n        return util.addDays(new Date(start.getTime()), 1);\n    };\n    Month.prototype.getDateRangeText = function () {\n        if (this.parent.isAdaptive || isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n            var startDate = this.parent.selectedDate;\n            var endDate = void 0;\n            var updateCustomRange = false;\n            if (this.isCustomMonth()) {\n                var dates = this.parent.getCurrentViewDates();\n                updateCustomRange = dates[0].getMonth() !== dates[dates.length - 1].getMonth() ||\n                    dates[0].getFullYear() !== dates[dates.length - 1].getFullYear();\n                if (updateCustomRange) {\n                    startDate = dates[0];\n                    endDate = dates[dates.length - 1];\n                }\n            }\n            var isUpdateDateRange = (this.parent.currentView !== 'Month' || !this.isCustomMonth());\n            if (this.parent.activeViewOptions.interval > 1 && isUpdateDateRange || updateCustomRange) {\n                endDate = endDate ? endDate : util.addMonths(util.lastDateOfMonth(startDate), this.parent.activeViewOptions.interval - 1);\n                if (startDate.getFullYear() === endDate.getFullYear()) {\n                    var monthNames = (this.parent.globalize.formatDate(startDate, { format: 'MMMM', calendar: this.parent.getCalendarMode() })) + ' - ' +\n                        (this.parent.globalize.formatDate(endDate, { format: 'MMMM ', calendar: this.parent.getCalendarMode() })) +\n                        this.parent.globalize.formatDate(endDate, { skeleton: 'y', calendar: this.parent.getCalendarMode() });\n                    return util.capitalizeFirstWord(monthNames, 'single');\n                }\n                var text = (this.parent.globalize.formatDate(startDate, { format: 'MMMM', calendar: this.parent.getCalendarMode() })) + ' ' +\n                    startDate.getFullYear() + ' - ' +\n                    this.parent.globalize.formatDate(endDate, { format: 'MMMM ', calendar: this.parent.getCalendarMode() }) +\n                    this.parent.globalize.formatDate(endDate, { skeleton: 'y', calendar: this.parent.getCalendarMode() });\n                return util.capitalizeFirstWord(text, 'single');\n            }\n            var format = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n            return util.capitalizeFirstWord(this.parent.globalize.formatDate(startDate, { format: format, calendar: this.parent.getCalendarMode() }), 'single');\n        }\n        return this.formatDateRange(this.parent.selectedDate);\n    };\n    Month.prototype.getLabelText = function (view) {\n        return this.parent.localeObj.getConstant(view) + ' of ' + util.capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: 'MMMM y', calendar: this.parent.getCalendarMode() }), 'single');\n    };\n    Month.prototype.createWeekNumberElement = function (text) {\n        var tr = createElement('tr');\n        var td = createElement('td', {\n            className: cls.WEEK_NUMBER_CLASS,\n            attrs: { 'title': (text ? this.parent.localeObj.getConstant('week') + ' ' + text : '') },\n            innerHTML: (text || '')\n        });\n        tr.appendChild(td);\n        var args = { elementType: 'weekNumberCell', element: td };\n        this.parent.trigger(event.renderCell, args);\n        return tr;\n    };\n    Month.prototype.unWireEvents = function () {\n        var contentScrollableEle = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (contentScrollableEle) {\n            EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n        }\n    };\n    Month.prototype.isCustomMonth = function () {\n        return this.parent.currentView === 'Month' &&\n            (!isNullOrUndefined(this.parent.activeViewOptions.displayDate) || this.parent.activeViewOptions.numberOfWeeks > 0);\n    };\n    Month.prototype.getModuleName = function () {\n        return 'month';\n    };\n    Month.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            if (this.monthEvent) {\n                this.monthEvent.destroy();\n                this.monthEvent = null;\n            }\n            this.unWireEvents();\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (this.parent.scheduleTouchModule) {\n                this.parent.scheduleTouchModule.resetValues();\n            }\n            _super.prototype.destroy.call(this);\n        }\n    };\n    return Month;\n}(ViewBase));\nexport { Month };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}